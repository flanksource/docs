---
title: GitHub
sidebar_custom_props:
  icon: github
---

import { Card, Cards } from '@site/../common/src/components/Card'
import { CapabilityBadges, CapabilityBadge } from '@site/../common/src/components/CapabilityBadges'

<CapabilityBadges>
  <CapabilityBadge type="healthcheck" />
  <CapabilityBadge type="playbook" />
  <CapabilityBadge type="scraper" />
</CapabilityBadges>

Mission Control integrates with GitHub to monitor repositories and trigger workflows. Use it to:

- Query repository data including commits, pull requests, and issues
- Monitor GitHub Actions workflow status and trigger new runs
- Scrape repository configurations and metadata into the catalog
- Dispatch workflows from playbooks for CI/CD automation
- Track repository health and security status

## Health Checks

### Repository Query

Query GitHub repositories and validate results.

```yaml title="github-health-check.yaml"
apiVersion: canaries.flanksource.com/v1
kind: Canary
metadata:
  name: github-check
spec:
  interval: 300
  github:
    - name: open-prs
      githubToken:
        valueFrom:
          secretKeyRef:
            name: github-credentials
            key: token
      query: |
        SELECT count(*) as pr_count
        FROM github_pull_requests('owner/repo')
        WHERE state = 'open'
      test:
        expr: results[0].pr_count < 50  # Alert if too many open PRs
```

## Playbook Actions

Trigger GitHub Actions workflows from playbooks.

### Dispatch Workflow

```yaml title="github-playbook-action.yaml"
apiVersion: mission-control.flanksource.com/v1
kind: Playbook
metadata:
  name: deploy-via-github
spec:
  parameters:
    - name: environment
      label: Target Environment
      type: list
      properties:
        options:
          - staging
          - production
  actions:
    - name: trigger-deploy
      github:
        repo: owner/deployment-repo
        token:
          valueFrom:
            secretKeyRef:
              name: github-credentials
              key: token
        workflow: deploy.yml
        ref: main
        inputs:
          environment: "{{.params.environment}}"
```

### Workflow with Parameters

```yaml title="github-workflow-params.yaml"
apiVersion: mission-control.flanksource.com/v1
kind: Playbook
metadata:
  name: run-tests
spec:
  on:
    config:
      - types:
          - Kubernetes::Deployment
        changes:
          - change_type: CREATE
  actions:
    - name: trigger-integration-tests
      github:
        repo: owner/test-repo
        workflow: integration-tests.yml
        ref: main
        inputs:
          namespace: "{{.config.config.metadata.namespace}}"
          deployment: "{{.config.name}}"
```

## Config Scrapers

Scrape GitHub repository data into the catalog.

```yaml title="github-scraper.yaml"
apiVersion: configs.flanksource.com/v1
kind: ScrapeConfig
metadata:
  name: github-repos
spec:
  schedule: "@every 6h"
  github:
    - organization: your-org
      personalAccessToken:
        valueFrom:
          secretKeyRef:
            name: github-credentials
            key: token
      repositories:
        - include: "*"
```

## Next Steps

<Cards>
  <Card title="Health Check Reference" href="/canary-checker/docs/reference/github">
    GitHub health check configuration options
  </Card>
  <Card title="GitHub Playbook Action" href="/docs/guide/playbooks/actions/github">
    GitHub Actions workflow dispatch reference
  </Card>
</Cards>
