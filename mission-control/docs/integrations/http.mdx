---
title: HTTP
sidebar_custom_props:
  icon: http
---

import { Card, Cards } from '@site/../common/src/components/Card'
import { CapabilityBadges, CapabilityBadge, CapabilityHeading } from '@site/../common/src/components/CapabilityBadges'

export const toc = [
  { value: 'Health Checks', id: 'health-checks', level: 2 },
  { value: 'Playbooks', id: 'playbooks', level: 2 },
  { value: 'Catalog', id: 'catalog', level: 2 },
];

<CapabilityBadges>
  <CapabilityBadge type="healthcheck" />
  <CapabilityBadge type="playbook" />
  <CapabilityBadge type="scraper" />
</CapabilityBadges>

Mission Control integrates with HTTP endpoints to monitor APIs and web services.

---

<CapabilityHeading type="healthcheck" />

**Use cases:**
- Monitor API availability and response times
- Validate JSON/XML response content against expected values
- Check SSL certificate expiration before services fail
- Authenticate with Basic Auth, OAuth2, or NTLM

### Basic Availability Check

Monitor HTTP endpoints with comprehensive validation options.

```yaml title="http-availability-check.yaml"
apiVersion: canaries.flanksource.com/v1
kind: Canary
metadata:
  name: api-health
spec:
  interval: 30
  http:
    - name: api-endpoint
      url: https://api.example.com/health
      responseCodes:
        - 200
```

<details summary="JSON Response Validation">

```yaml title="http-json-check.yaml"
apiVersion: canaries.flanksource.com/v1
kind: Canary
metadata:
  name: api-status
spec:
  interval: 60
  http:
    - name: api-status
      url: https://api.example.com/status
      responseCodes:
        - 200
      responseContent:
        jsonPath:
          path: $.status
          value: healthy
```
</details>

<details summary="SSL Certificate Check">

```yaml title="http-ssl-check.yaml"
apiVersion: canaries.flanksource.com/v1
kind: Canary
metadata:
  name: ssl-expiry
spec:
  interval: 3600
  http:
    - name: ssl-check
      url: https://example.com
      maxSSLExpiry: 720  # Alert if cert expires within 30 days (720 hours)
```
</details>

<details summary="Response Time Threshold">

```yaml title="http-latency-check.yaml"
apiVersion: canaries.flanksource.com/v1
kind: Canary
metadata:
  name: api-latency
spec:
  interval: 30
  http:
    - name: api-response-time
      url: https://api.example.com/data
      thresholdMillis: 500  # Alert if response takes > 500ms
```
</details>

<details summary="Authentication">

```yaml title="http-auth-check.yaml"
apiVersion: canaries.flanksource.com/v1
kind: Canary
metadata:
  name: authenticated-api
spec:
  interval: 60
  http:
    - name: secure-api
      url: https://api.example.com/secure
      authentication:
        username:
          valueFrom:
            secretKeyRef:
              name: api-credentials
              key: username
        password:
          valueFrom:
            secretKeyRef:
              name: api-credentials
              key: password
```
</details>

---

<CapabilityHeading type="playbook" />

**Use cases:**
- Execute HTTP requests from playbooks for webhooks and API calls
- Trigger external systems in response to events

```yaml title="http-playbook-action.yaml"
apiVersion: mission-control.flanksource.com/v1
kind: Playbook
metadata:
  name: notify-external
spec:
  on:
    canary:
      - name: critical-service
        failed: true
  actions:
    - name: webhook-notification
      http:
        url: https://hooks.example.com/incident
        method: POST
        headers:
          Content-Type: application/json
        body: |
          {
            "service": "{{.check.name}}",
            "status": "{{.check.status}}",
            "message": "{{.check.message}}"
          }
```

---

<CapabilityHeading type="scraper" />

**Use cases:**
- Scrape configuration data from REST APIs
- Import data from external systems into the catalog

```yaml title="http-scraper.yaml"
apiVersion: configs.flanksource.com/v1
kind: ScrapeConfig
metadata:
  name: api-config
spec:
  schedule: "@every 1h"
  http:
    - url: https://api.example.com/config
      headers:
        Authorization: Bearer ${API_TOKEN}
      items:
        - type: API::Config
          id: .id
          name: .name
```

## Next Steps

<Cards>
  <Card icon="playbook" title="HTTP Playbook Action" href="/docs/guide/playbooks/actions/http">
    HTTP action reference for playbooks
  </Card>
  <Card icon="scraper" title="HTTP Scraper" href="/docs/guide/config-db/scrapers/http">
    Scrape configuration from HTTP endpoints
  </Card>
</Cards>
