---
title: Configs
description: Events that fire on config changes and health
---

import Config from "../../reference/config-db/config.md"

Configs emit events when their health changes or when they are created, modified, or removed.

**Health events**

- `config.healthy`
- `config.unhealthy`
- `config.warning`
- `config.unknown`

The default notification template for health events is:

- **Title:** `{{.config.type}} {{.config.name}} is {{.config.health}}`
- **Body:**

  ```
  ### Labels:
    {{range $k, $v := .config.labels}}**{{$k}}**: {{$v}}
    {{end}}
    [Reference]({{.permalink}})
  ```

**State events**

- `config.created`
- `config.updated`
- `config.deleted`

The default notification template for state events is:

- **Title:** `{{.config.type}} {{.config.name}} was [created/updated/deleted]`
- **Body:**

  ```
  ### Labels:
  {{range $k, $v := .config.labels}}**{{$k}}**: {{$v}}
  {{end}}
  [Reference]({{.permalink}})
  ```

Sample notification:

```yaml title="notification.yaml"
apiVersion: mission-control.flanksource.com/v1
kind: Notification
metadata:
  name: ec2-instance-create-alert
  namespace: default
spec:
  events:
    - config.created
  filter: config.type == 'AWS::EC2::Instance'
  title: New EC2 instance {{.config.name}} created
  body: |
    Region: {{.config.tags['region']}}
    Zone: {{.config.tags['zone']}}
    Account: {{.config.tags['account']}}
  to:
    email: alerts@acme.com
```

## Variables

| Field       | Description                   | Schema              | nullable |
| ----------- | ----------------------------- | ------------------- | -------- |
| `config`    | The config object             | [`Config`](#config) |          |
| `agent`     | Agent details (if applicable) | [`Agent`](#agent)   | `true`   |
| `permalink` | A link to the config item     | `string`            |          |

### Config

<Config/>

### Agent

| Field         | Description                    | Schema   | Optional |
| ------------- | ------------------------------ | -------- | -------- |
| `id`          | The id of the agent            | `uuid`   |          |
| `name`        | The name of the agent          | `string` |          |
| `description` | Short description of the agent | `string` |          |

## Notification Defaults
