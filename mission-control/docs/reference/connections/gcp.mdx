---
title: GCP
description: Connect to Google Cloud Platform for health checks, config scraping, and playbook actions
sidebar_custom_props:
  icon: google-cloud
---

GCP connections enable integration with Google Cloud Platform for health checks, configuration scraping, and playbook automation.

## Used By

- [GCP Config Scraper](/docs/guide/config-db/scrapers/gcp) - Scrape GCP resource configurations
- [GCS Folder Check](/docs/reference/canary-checker) - Check Cloud Storage buckets
- [Playbook Actions](/docs/guide/playbooks/actions) - Execute GCP-related automation

<Fields connection="gcp"/>

## Authentication Methods

<Step step={1} name="GKE Workload Identity" style="list">

Use GKE [workload identity](https://cloud.google.com/kubernetes-engine/docs/how-to/workload-identity). This is the default when no `connection` or `credentials` is specified and the recommended approach for workloads running on GKE.

</Step>

<Step step={2} name="Connection Reference" style="list">

Reference a shared connection:

```yaml title="using-connection.yaml"
apiVersion: canaries.flanksource.com/v1
kind: Canary
metadata:
  name: gcs-check
spec:
  interval: 60
  folder:
    - name: GCS Backup Check
      path: gcs://my-bucket
      gcpConnection:
        connection: connection://gcp/production
```

</Step>

<Step step={3} name="Inline Credentials" style="list">

Specify service account credentials directly:

```yaml title="inline-credentials.yaml"
apiVersion: canaries.flanksource.com/v1
kind: Canary
metadata:
  name: gcs-check
spec:
  interval: 60
  folder:
    - name: GCS Backup Check
      path: gcs://my-bucket
      gcpConnection:
        credentials:
          valueFrom:
            secretKeyRef:
              name: gcp-credentials
              key: service-account.json
```

</Step>

## Examples

<details summary="Service Account Connection">
<div>

Create a GCP connection with service account:

```yaml title="gcp-connection.yaml"
apiVersion: mission-control.flanksource.com/v1
kind: Connection
metadata:
  name: gcp-production
  namespace: default
spec:
  gcp:
    credentials:
      valueFrom:
        secretKeyRef:
          name: gcp-credentials
          key: service-account.json
```

</div>
</details>

<details summary="With Project ID">
<div>

Include project for resource access:

```yaml title="gcp-with-project.yaml"
apiVersion: mission-control.flanksource.com/v1
kind: Connection
metadata:
  name: gcp-project
spec:
  gcp:
    project: my-gcp-project
    credentials:
      valueFrom:
        secretKeyRef:
          name: gcp-credentials
          key: service-account.json
```

</div>
</details>
