<Fields rows={[
  {
    field: "description",
    description: "Short explanation of what the view shows",
    scheme: "string"
  },
  {
    field: "display.title",
    description: "Human-readable title displayed in the UI _(defaults to view name)_",
    scheme: "string"
  },
  {
    field: "display.icon",
    description: "Icon identifier for navigation and visual identification",
    scheme: "icon"
  },
  {
    field: "display.sidebar",
    description: "Whether the view appears in sidebar navigation _(default: false)_",
    scheme: "bool"
  },
  {
    field: "display.ordinal",
    description: "Sort order for navigation, lower numbers appear first _(default: 0)_",
    scheme: "int"
  },
  {
    field: "display.card",
    description: "Default card layout for the view (body column count and whether cards are the default mode)",
    scheme: "[DisplayCard](#view-card-layout)"
  },
  {
    field: "display.table",
    description: "Default table layout for the view (sort order and page size)",
    scheme: "[DisplayTable](#view-table-layout)"
  },
  {
    field: "display.plugins[]",
    description: "Attach the view as a tab on matching config items with templated variables extracted from the config",
    scheme: "[ViewConfigUIPlugin](#config-tabs)"
  },
  {
    field: "panels",
    description: "Interactive visualizations for aggregated data",
    scheme: "[[]PanelDef](#panel-definition)"
  },
  {
    field: "columns",
    description: "Define the structure and data types of the view table",
    scheme: "[[]ViewColumnDef](#view-column-definition)"
  },
  {
    field: "queries",
    required: true,
    description: "Named queries that populate the view data sources",
    scheme: "[`map[string]Query`](#query)"
  },
  {
    field: "merge",
    description: "SQL query to merge/join data from multiple named queries. Required when using multiple queries with table output _(columns only)_.",
    scheme: "string"
  },
  {
    field: "mapping",
    description: "CEL expressions to map query results to view columns. _If not specified, columns are automatically populated from query results._",
    scheme: "[`map[string]CELExpression`](/docs/reference/scripting/cel)"
  },
  {
    field: "cache.maxAge",
    description: "Maximum age of cache before it's deemed stale _(default: 15m)_",
    scheme: "duration"
  },
  {
    field: "cache.minAge",
    description: "Minimum age of cache a user can request _(default: 10s)_",
    scheme: "duration"
  },
  {
    field: "cache.refreshTimeout",
    description: "Duration to wait for a view to process before returning stale data _(default: 5s)_",
    scheme: "duration"
  },
  {
    field: "templating",
    description: "Variable definitions that can be substituted into queries and mappings",
    scheme: "[[]ViewVariable](/mission-control/guide/views/concepts/templating)"
  },
  {
    field: "sections",
    description: "List of other views to render on the same page",
    scheme: "[[]ViewSection](#sections)"
  }
]}/>

:::note Validation Requirements
- **At least one query**: Views must define at least one named query (unless the view only renders `sections`)
- **Output definition**: Views must have either `panels` or `columns` (or both)
- **Merge requirement**: When using multiple queries with table output (columns only), you must provide a `merge` SQL query
:::

### Query

Query definition for data sources.

<Fields rows={[
  {
    field: "configs",
    description: "Query config items from the catalog",
    scheme: "[ResourceSelector](/docs/reference/resource-selector)"
  },
  {
    field: "changes",
    description: "Query configuration changes and audit data",
    scheme: "[ResourceSelector](/docs/reference/resource-selector)"
  },
  {
    field: "sql",
    description: "Run a SQL query against a configured connection (PostgreSQL, MySQL, SQL Server)",
    scheme: "[SQL query](/mission-control/guide/views/queries/sql)"
  },
  {
    field: "http",
    description: "Query external APIs via HTTP",
    scheme: "[HTTP Query](#http-query)"
  },
  {
    field: "prometheus",
    description: "Query time-series data from Prometheus",
    scheme: "[Prometheus Query](#prometheus-query)"
  },
  {
    field: "viewTableSelector",
    description: "Read cached rows from another view table",
    scheme: "[View Table Selector](#view-table-selector)"
  },
  {
    field: "columns",
    description: "Define column types for the query results (useful for HTTP/Prometheus)",
    scheme: "map[string]ColumnType"
  }
]}/>

#### HTTP Query

Query configuration for HTTP requests.

<Fields rows={[
  {
    field: "url",
    required: true,
    description: "Target URL",
    scheme: "string"
  },
  {
    field: "method",
    description: "HTTP method _(default: GET)_",
    scheme: "string"
  },
  {
    field: "body",
    description: "Request body for POST/PUT/PATCH",
    scheme: "string"
  },
  {
    field: "jsonpath",
    description: "JSONPath expression to extract rows from response",
    scheme: "string"
  },
  {
    field: "headers",
    description: "Custom request headers",
    scheme: "[[]EnvVar](/docs/reference/env-var)"
  },
  {
    field: "connection",
    description: "Reference to a connection",
    scheme: "string"
  },
  {
    field: "username",
    description: "Basic auth username",
    scheme: "EnvVar"
  },
  {
    field: "password",
    description: "Basic auth password",
    scheme: "EnvVar"
  },
  {
    field: "bearer",
    description: "Bearer token",
    scheme: "EnvVar"
  }
]}/>

#### Prometheus Query

Query configuration for Prometheus metrics.

<Fields rows={[
  {
    field: "query",
    required: true,
    description: "PromQL query string",
    scheme: "string"
  },
  {
    field: "url",
    description: "Prometheus server URL",
    scheme: "string"
  },
  {
    field: "connection",
    description: "Reference to a connection for authentication",
    scheme: "string"
  },
  {
    field: "username",
    description: "Basic auth username",
    scheme: "EnvVar"
  },
  {
    field: "password",
    description: "Basic auth password",
    scheme: "EnvVar"
  },
  {
    field: "bearer",
    description: "Bearer token for authentication",
    scheme: "EnvVar"
  }
]}/>

### View Column Definition

Column definition for view tables with data types and visualization properties.

<Fields rows={[
  {
    field: "name",
    required: true,
    description: "Column name _(must be a valid SQL identifier)_",
    scheme: "string"
  },
  {
    field: "type",
    required: true,
    description: "Data type that determines formatting and visualization",
    scheme: "`string`, `number`, `boolean`, `datetime`, `duration`, `health`, `status`, `gauge`, `bytes`, `decimal`, `millicore`, `url`, `badge`, `config_item`, `labels`"
  },
  {
    field: "primaryKey",
    description: "Whether this column is part of the primary key _(default: false)_. At least one column must be marked as primary key.",
    scheme: "bool"
  },
  {
    field: "description",
    description: "Human-readable description of the column",
    scheme: "string"
  },
  {
    field: "hidden",
    description: "Whether to hide the column from the UI _(default: false)_",
    scheme: "bool"
  },
  {
    field: "filter",
    description: "Enable column filtering in the UI. Options are populated from the cached table per request fingerprint _(type: multiselect; labels columns support key/value include-exclude filters)_",
    scheme: "object"
  },
  {
    field: "icon",
    description: "CEL expression that selects an icon per row (for tables and cards)",
    scheme: "string"
  },
  {
    field: "url",
    description: "Link to configs, other views, or custom URLs using CEL/Go templates",
    scheme: "[ColumnURL](#column-urls)"
  },
  {
    field: "unit",
    description: "Unit string appended to values (e.g., %, bytes, millicore)",
    scheme: "string"
  },
  {
    field: "configItem",
    description: "Options for `config_item` columns (choose which field to treat as the config ID)",
    scheme: "ConfigItemColumnType"
  },
  {
    field: "for",
    description: "Reference to another column this column provides data for _(helper columns)_. Only applicable for type=url.",
    scheme: "string"
  },
  {
    field: "gauge",
    description: "Configuration for gauge visualization _(required when type=gauge)_",
    scheme: "[GaugeConfig](#gauge-configuration)"
  },
  {
    field: "card",
    description: "Card layout configuration for this column (position and accent highlighting)",
    scheme: "CardConfig"
  }
]}/>

:::note Primary Key Requirement
If `columns` are defined, at least one must be marked as `primaryKey: true`.
:::

### Panel Definition

Panel definition for interactive visualizations.

<Fields rows={[
  {
    field: "name",
    required: true,
    description: "Name of the panel",
    scheme: "string"
  },
  {
    field: "description",
    description: "Description of the panel",
    scheme: "string"
  },
  {
    field: "type",
    required: true,
    description: "Type of panel visualization",
    scheme: "`piechart`, `table`, `text`, `number`, `duration`, `gauge`, `bargauge`, `timeseries`, `properties`"
  },
  {
    field: "query",
    required: true,
    description: "SQL query to aggregate data from the view's named queries",
    scheme: "string"
  },
  {
    field: "piechart",
    description: "Configuration for pie chart panels",
    scheme: "[Pie Chart Configuration](#pie-chart-configuration)"
  },
  {
    field: "gauge",
    description: "Configuration for gauge panels",
    scheme: "[Gauge Configuration](#gauge-configuration)"
  },
  {
    field: "number",
    description: "Configuration for number panels",
    scheme: "[Panel Number Configuration](#panel-number-configuration)"
  },
  {
    field: "bargauge",
    description: "Configuration for bar gauge panels",
    scheme: "[Bar Gauge Configuration](#bar-gauge-configuration)"
  },
  {
    field: "timeseries",
    description: "Configuration for timeseries panels",
    scheme: "[Timeseries Configuration](#timeseries-configuration)"
  },
  {
    field: "properties",
    description: "Properties panel renders query results as key-value pairs (no specific configuration)",
    scheme: "object"
  }
]}/>

#### Pie Chart Configuration

Configuration for pie chart panels.

<Fields rows={[
  {
    field: "showLabels",
    description: "Display labels on pie slices",
    scheme: "bool"
  },
  {
    field: "colors",
    description: "Custom color mapping for categories",
    scheme: "map[string]string"
  }
]}/>

#### Gauge Configuration

Configuration for gauge visualizations with thresholds and color coding.

<Fields rows={[
  {
    field: "min",
    description: "Minimum value for the gauge (number or CEL expression)",
    scheme: "string"
  },
  {
    field: "max",
    description: "Maximum value for the gauge (number or CEL expression)",
    scheme: "string"
  },
  {
    field: "thresholds[].value",
    description: "Threshold value (deprecated; use percent)",
    scheme: "int"
  },
  {
    field: "thresholds[].color",
    description: "Color for this threshold",
    scheme: "string"
  }
]}/>

#### Panel Number Configuration

Configuration for number panels.

<Fields rows={[
  {
    field: "unit",
    description: "Display unit _(e.g., 'seconds', 'MB', '%')_",
    scheme: "string"
  },
  {
    field: "precision",
    description: "Number of decimal places",
    scheme: "int"
  }
]}/>

#### Bar Gauge Configuration

Configuration for bar gauge panels.

<Fields rows={[
  {
    field: "min",
    description: "Minimum value (number or CEL expression)",
    scheme: "string"
  },
  {
    field: "max",
    description: "Maximum value (number or CEL expression)",
    scheme: "string"
  },
  {
    field: "thresholds[].value",
    description: "Threshold value (deprecated; use percent)",
    scheme: "int"
  },
  {
    field: "thresholds[].color",
    description: "Color for this threshold",
    scheme: "string"
  },
  {
    field: "unit",
    description: "Unit label appended to values",
    scheme: "string"
  },
  {
    field: "format",
    description: "Display format (`percentage` or `multiplier`)",
    scheme: "string"
  },
  {
    field: "precision",
    description: "Number of decimal places",
    scheme: "int"
  },
  {
    field: "group",
    description: "Optional group name to merge multiple bar gauges",
    scheme: "string"
  }
]}/>

#### Timeseries Configuration

Configuration for timeseries panels (API-level; UI rendering in progress).

<Fields rows={[
  {
    field: "timeKey",
    description: "Field name for the timestamp column _(default: `timestamp`)_",
    scheme: "string"
  },
  {
    field: "valueKey",
    description: "Field name for the numeric value column _(default: `value`)_",
    scheme: "string"
  },
  {
    field: "style",
    description: "Visualization style: `lines`, `area`, or `points`",
    scheme: "string"
  }
]}/>

### View Table Layout

`display.table` controls the default table layout for the view.

<Fields rows={[
  {
    field: "sort",
    description: "Default sort column name. Prefix with `-` for descending order.",
    scheme: "string"
  },
  {
    field: "size",
    description: "Default page size for the table.",
    scheme: "int"
  }
]}/>

### View Card Layout

`display.card` controls the default card layout for tables with card positioning. Cards become the default view when `default: true` and at least one column defines `card.position` (or legacy `cardPosition`). Use `columns[].card.useForAccent` to color the card accent based on a column's value (status/health heuristics in the UI):

<Fields rows={[
  {
    field: "columns",
    required: true,
    description: "Number of columns in the card body",
    scheme: "int"
  },
  {
    field: "default",
    description: "Whether the Cards tab should be the default display mode",
    scheme: "bool"
  }
]}/>

### Config Tabs

Use `display.plugins` to attach a view as a tab on config detail pages. The `configTab` selector chooses matching configs, and `variables` templating pulls values from the config into the view request.

```yaml title="namespace.yaml" file=<rootDir>/modules/mission-control/fixtures/views/namespace.yaml {66-76}

```

### Column Filters

Enable `columns[].filter.type: multiselect` to expose server-side filters without re-running the view. Mission Control gathers distinct values from the cached Postgres table (scoped to the current `request_fingerprint`), builds dropdown options, and applies PostgREST filters. Labels columns support include/exclude tokens so you can target specific keys.

```yaml title="ingress.yaml" file=<rootDir>/modules/mission-control/fixtures/views/ingress.yaml {8-48}

```

### Column URLs

`columns[].url` can link to Mission Control objects or external destinations:

- `config`: CEL expression resolving to a config ID or search query (redirects to catalog page)
- `view`: Link to another view with optional query params built from CEL expressions
- `template`: Go template that renders a custom URL

```yaml title="deployments.yaml" file=<rootDir>/modules/mission-control/fixtures/views/deployments.yaml {37-40,72-73}

```

### Row Attributes and Grants

Mission Control appends hidden, reserved columns to every view table:

- `__row__attributes` (`row_attributes` type) stores per-column metadata generated during mapping: evaluated icons, URLs, gauge min/max overrides, and config item details (`id`, `type`, `class`, `health`, `status`). The UI uses these attributes to render icons, clickable links, and card accents.
- `__grants` (`grants` type) stores scope IDs computed for config queries so row-level security policies can filter PostgREST responses.

You do not need to declare these columns, but they appear in the materialized Postgres table and PostgREST output.

### View Table Selector

Reference cached data from another view instead of re-querying sources. The selector matches views by `name`, `namespace`, or `labelSelector`, then treats their materialized tables as a query source.

```yaml title="deployments-summary.yaml" file=<rootDir>/modules/mission-control/fixtures/views/deployments-summary.yaml {10-37}

```

### Sections

Render multiple views on one page. Section-only views can omit panels and columns; each section points at another view and is rendered with shared variable controls.

```yaml title="workload-overview.yaml" file=<rootDir>/modules/mission-control/fixtures/views/workload-overview.yaml {6-24}

```
