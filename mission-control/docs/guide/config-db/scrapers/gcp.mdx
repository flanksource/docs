---
title: GCP
sidebar_position: 8
sidebar_custom_props:
  icon: google-cloud
---

# <Icon name="google-cloud"/> GCP

<!-- Source: modules/config-db/api/v1/gcp.go#GCP -->

The GCP scrapers scrapes your GCP account to fetch all the resources & save them as configs.

```yaml title="gcp-scraper.yaml" file=<rootDir>/modules/config-db/fixtures/gcp.yaml
```

## Scraper

| Field       | Description                                                                  | Scheme                                             | Required |
| ----------- | ---------------------------------------------------------------------------- | -------------------------------------------------- | -------- |
| `logLevel`  | Specify the level of logging.                                                | `string`                                           |          |
| `schedule`  | Specify the interval to scrape in cron format. Defaults to every 60 minutes. | `string`                                           |          |
| `retention` | Settings for retaining changes, analysis and scraped items                   | [`Retention`](/docs/guide/config-db/concepts/retention) |          |
| `gcp`       | GCP scrape config                                                            | [`[]GCP`](#gcp)                                    |          |

### GCP

:::note
Either the `connection` name or the `credentials` are required (if Workload Identity is not being used)
:::

<Scraper connection="gcp" rows={[
  {
    field: 'project',
    description: 'GCP Project ID',
    scheme: 'string',
    required: true
  },
  {
    field: 'include',
    description: 'GCP resources to include for scraping',
    scheme: '[]string'
  },
  {
    field: 'exclude',
    description: 'GCP resources to exclude from scraping',
    scheme: '[]string'
  },
  {
    field: 'auditLogs',
    description: 'Query BigQuery dataset for audit logs',
    scheme: '[`AuditLogs`](#audit-logs)'
  },
]}
/>

### Audit Logs

| Field             | Description                                                              | Scheme              |
| ----------------- | ------------------------------------------------------------------------ | ------------------- |
| `dataset`         | BigQuery dataset to query audit logs from (e.g., "default._AllLogs")     | `string`            |
| `since`           | Time range to query audit logs (e.g., "24h", "7d", "30d")                | `string`            |
| `userAgents`      | Filter user agents matching these patterns                               | `MatchExpressions`  |
| `principalEmails` | Filter principal emails matching these patterns                          | `MatchExpressions`  |
| `permissions`     | Filter permissions matching these patterns                               | `MatchExpressions`  |
| `serviceNames`    | Filter service names matching these patterns                             | `MatchExpressions`  |
| `methods`         | Filter methods matching these patterns                                   | `MatchExpressions`  |
